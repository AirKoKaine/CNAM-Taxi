<!-- =======================================================
     CALCULATEUR TARIF CONVENTIONNÉ - TAXI SAINT-PAUL-DE-VENCE
     ======================================================= -->
<div id="taxi-calc" style="max-width:940px;margin:auto">

  <div class="card" style="background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:18px;box-shadow:0 10px 25px rgba(0,0,0,.06)">
    <h2 style="color:#b88933;margin:0;font-weight:700;text-align:center">Taxi Saint-Paul-de-Vence</h2>
    <h4 style="color:#777;margin:6px 0 20px;text-align:center">Calculateur de tarif conventionné</h4>

    <!-- Type de transport -->
    <label>Type de transport :</label>
    <select id="tripType" style="width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc">
      <option value="consultation" selected>Consultation</option>
      <option value="hospitalisation">Hospitalisation (aller/retour à vide ou trajet unique)</option>
    </select>

    <!-- Consultation -->
    <div id="consultationFields">
      <label>Distance totale (km) :</label>
      <input id="kmTotal" type="number" step="0.1" value="10" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px">
    </div>

    <!-- Hospitalisation -->
    <div id="hospitalisationFields" style="display:none">
      <label>Kilométrage en charge (hospitalisation) :</label>
      <input id="hospitalChargeKm" type="number" value="40" step="0.1" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px">

      <label>Type de trajet (hospitalisation) :</label>
      <select id="hospTripType" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px">
        <option value="retour_vide" selected>Aller ou retour à vide</option>
        <option value="trajet_unique">Trajet unique (même calcul que consultation)</option>
      </select>

      <div class="row" style="display:flex;gap:12px;align-items:end">
        <div class="col" style="flex:1">
          <label style="display:flex;align-items:center;gap:6px"><input id="isHospShared" type="checkbox"> Transport partagé</label>
          <select id="numHospPatients" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px">
            <option value="1">1 patient</option>
            <option value="2">2 patients</option>
            <option value="3">3 patients</option>
            <option value="4">4 patients</option>
          </select>
        </div>
        <div class="col" style="flex:1">
          <label for="hospTolls">Péages (hospitalisation) (€) :</label>
          <input id="hospTolls" type="number" step="0.01" value="0" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px">
        </div>
      </div>
    </div>

    <!-- Département (tous les départements FR + DROM) -->
    <label>Département :</label>
    <select id="dept" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px;margin-bottom:10px">
      <option value="1.13" data-code="01">01 Ain — 1.13 €/km</option>
      <option value="1.20" data-code="02">02 Aisne — 1.20 €/km</option>
      <option value="1.19" data-code="03">03 Allier — 1.19 €/km</option>
      <option value="1.14" data-code="04">04 Alpes-de-Haute-Provence — 1.14 €/km</option>
      <option value="1.18" data-code="05">05 Hautes-Alpes — 1.18 €/km</option>
      <option value="1.27" data-code="06" selected>06 Alpes-Maritimes — 1.27 €/km</option>
      <option value="1.17" data-code="07">07 Ardèche — 1.17 €/km</option>
      <option value="1.17" data-code="08">08 Ardennes — 1.17 €/km</option>
      <option value="1.15" data-code="09">09 Ariège — 1.15 €/km</option>
      <option value="1.13" data-code="10">10 Aube — 1.13 €/km</option>
      <option value="1.08" data-code="11">11 Aude — 1.08 €/km</option>
      <option value="1.16" data-code="12">12 Aveyron — 1.16 €/km</option>
      <option value="1.10" data-code="13">13 Bouches-du-Rhône — 1.10 €/km</option>
      <option value="1.07" data-code="14">14 Calvados — 1.07 €/km</option>
      <option value="1.13" data-code="15">15 Cantal — 1.13 €/km</option>
      <option value="1.12" data-code="16">16 Charente — 1.12 €/km</option>
      <option value="1.10" data-code="17">17 Charente-Maritime — 1.10 €/km</option>
      <option value="1.26" data-code="18">18 Cher — 1.26 €/km</option>
      <option value="1.16" data-code="19">19 Corrèze — 1.16 €/km</option>
      <option value="1.12" data-code="21">21 Côte-d'Or — 1.12 €/km</option>
      <option value="1.13" data-code="22">22 Côtes-d'Armor — 1.13 €/km</option>
      <option value="1.18" data-code="23">23 Creuse — 1.18 €/km</option>
      <option value="1.11" data-code="24">24 Dordogne — 1.11 €/km</option>
      <option value="1.08" data-code="25">25 Doubs — 1.08 €/km</option>
      <option value="1.16" data-code="26">26 Drôme — 1.16 €/km</option>
      <option value="1.21" data-code="27">27 Eure — 1.21 €/km</option>
      <option value="1.19" data-code="28">28 Eure-et-Loir — 1.19 €/km</option>
      <option value="1.07" data-code="29">29 Finistère — 1.07 €/km</option>
      <option value="1.27" data-code="2A">2A Corse-du-Sud — 1.27 €/km</option>
      <option value="1.27" data-code="2B">2B Haute-Corse — 1.27 €/km</option>
      <option value="1.08" data-code="30">30 Gard — 1.08 €/km</option>
      <option value="1.10" data-code="31">31 Haute-Garonne — 1.10 €/km</option>
      <option value="1.19" data-code="32">32 Gers — 1.19 €/km</option>
      <option value="1.07" data-code="33">33 Gironde — 1.07 €/km</option>
      <option value="1.07" data-code="34">34 Hérault — 1.07 €/km</option>
      <option value="1.07" data-code="35">35 Ille-et-Vilaine — 1.07 €/km</option>
      <option value="1.25" data-code="36">36 Indre — 1.25 €/km</option>
      <option value="1.18" data-code="37">37 Indre-et-Loire — 1.18 €/km</option>
      <option value="1.22" data-code="38">38 Isère — 1.22 €/km</option>
      <option value="1.11" data-code="39">39 Jura — 1.11 €/km</option>
      <option value="1.13" data-code="40">40 Landes — 1.13 €/km</option>
      <option value="1.13" data-code="41">41 Loir-et-Cher — 1.13 €/km</option>
      <option value="1.08" data-code="42">42 Loire — 1.08 €/km</option>
      <option value="1.24" data-code="43">43 Haute-Loire — 1.24 €/km</option>
      <option value="1.08" data-code="44">44 Loire-Atlantique — 1.08 €/km</option>
      <option value="1.07" data-code="45">45 Loiret — 1.07 €/km</option>
      <option value="1.13" data-code="46">46 Lot — 1.13 €/km</option>
      <option value="1.11" data-code="47">47 Lot-et-Garonne — 1.11 €/km</option>
      <option value="1.25" data-code="48">48 Lozère — 1.25 €/km</option>
      <option value="1.08" data-code="49">49 Maine-et-Loire — 1.08 €/km</option>
      <option value="1.16" data-code="50">50 Manche — 1.16 €/km</option>
      <option value="1.12" data-code="51">51 Marne — 1.12 €/km</option>
      <option value="1.26" data-code="52">52 Haute-Marne — 1.26 €/km</option>
      <option value="1.09" data-code="53">53 Mayenne — 1.09 €/km</option>
      <option value="1.09" data-code="54">54 Meurthe-et-Moselle — 1.09 €/km</option>
      <option value="1.12" data-code="55">55 Meuse — 1.12 €/km</option>
      <option value="1.07" data-code="56">56 Morbihan — 1.07 €/km</option>
      <option value="1.14" data-code="57">57 Moselle — 1.14 €/km</option>
      <option value="1.27" data-code="58">58 Nièvre — 1.27 €/km</option>
      <option value="1.20" data-code="59">59 Nord — 1.20 €/km</option>
      <option value="1.20" data-code="60">60 Oise — 1.20 €/km</option>
      <option value="1.17" data-code="61">61 Orne — 1.17 €/km</option>
      <option value="1.20" data-code="62">62 Pas-de-Calais — 1.20 €/km</option>
      <option value="1.13" data-code="63">63 Puy-de-Dôme — 1.13 €/km</option>
      <option value="1.14" data-code="64">64 Pyrénées-Atlantiques — 1.14 €/km</option>
      <option value="1.07" data-code="65">65 Hautes-Pyrénées — 1.07 €/km</option>
      <option value="1.18" data-code="66">66 Pyrénées-Orientales — 1.18 €/km</option>
      <option value="1.07" data-code="67">67 Bas-Rhin — 1.07 €/km</option>
      <option value="1.07" data-code="68">68 Haut-Rhin — 1.07 €/km</option>
      <option value="1.07" data-code="69">69 Rhône — 1.07 €/km</option>
      <option value="1.08" data-code="70">70 Haute-Saône — 1.08 €/km</option>
      <option value="1.10" data-code="71">71 Saône-et-Loire — 1.10 €/km</option>
      <option value="1.07" data-code="72">72 Sarthe — 1.07 €/km</option>
      <option value="1.15" data-code="73">73 Savoie — 1.15 €/km</option>
      <option value="1.22" data-code="74">74 Haute-Savoie — 1.22 €/km</option>
      <option value="1.22" data-code="75">75 Paris — 1.22 €/km</option>
      <option value="1.18" data-code="76">76 Seine-Maritime — 1.18 €/km</option>
      <option value="1.07" data-code="77">77 Seine-et-Marne — 1.07 €/km</option>
      <option value="1.07" data-code="78">78 Yvelines — 1.07 €/km</option>
      <option value="1.08" data-code="79">79 Deux-Sèvres — 1.08 €/km</option>
      <option value="1.15" data-code="80">80 Somme — 1.15 €/km</option>
      <option value="1.07" data-code="81">81 Tarn — 1.07 €/km</option>
      <option value="1.07" data-code="82">82 Tarn-et-Garonne — 1.07 €/km</option>
      <option value="1.16" data-code="83">83 Var — 1.16 €/km</option>
      <option value="1.20" data-code="84">84 Vaucluse — 1.20 €/km</option>
      <option value="1.07" data-code="85">85 Vendée — 1.07 €/km</option>
      <option value="1.11" data-code="86">86 Vienne — 1.11 €/km</option>
      <option value="1.10" data-code="87">87 Haute-Vienne — 1.10 €/km</option>
      <option value="1.10" data-code="88">88 Vosges — 1.10 €/km</option>
      <option value="1.11" data-code="89">89 Yonne — 1.11 €/km</option>
      <option value="1.08" data-code="90">90 Territoire de Belfort — 1.08 €/km</option>
      <option value="1.07" data-code="91">91 Essonne — 1.07 €/km</option>
      <option value="1.07" data-code="92">92 Hauts-de-Seine — 1.07 €/km</option>
      <option value="1.07" data-code="93">93 Seine-Saint-Denis — 1.07 €/km</option>
      <option value="1.07" data-code="94">94 Val-de-Marne — 1.07 €/km</option>
      <option value="1.07" data-code="95">95 Val-d'Oise — 1.07 €/km</option>
      <!-- DROM -->
      <option value="1.07" data-code="971">971 Guadeloupe — 1.07 €/km</option>
      <option value="1.20" data-code="972">972 Martinique — 1.20 €/km</option>
      <option value="1.10" data-code="973">973 Guyane — 1.10 €/km</option>
      <option value="1.22" data-code="974">974 Réunion — 1.22 €/km</option>
      <option value="1.10" data-code="976">976 Mayotte — 1.10 €/km</option>
    </select>

    <!-- Options -->
    <div class="row" style="display:flex;gap:10px;flex-wrap:wrap">
      <label class="col" style="flex:1"><input id="isGrandeVille" type="checkbox"> Grande ville (+15 €)</label>
      <label class="col" style="flex:1"><input id="isNightOrWeekend" type="checkbox"> Nuit / WE / férié (+50 %)</label>
    </div>

    <!-- Consultation : partagé + péages -->
    <div id="consultationShare" style="margin-top:10px">
      <label><input id="isShared" type="checkbox"> Transport partagé</label>
      <div class="row" style="display:flex;gap:10px;align-items:end;margin-top:6px">
        <div class="col" style="flex:1">
          <select id="numPatients" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px">
            <option value="1">1 patient</option>
            <option value="2">2 patients</option>
            <option value="3">3 patients</option>
          </select>
        </div>
        <div class="col" style="flex:1">
          <input id="tollsTotal" type="number" step="0.01" placeholder="Péages (€)" style="width:100%;padding:10px;border:1px solid #ccc;border-radius:8px">
        </div>
      </div>
    </div>

    <div class="row" style="display:flex;gap:10px;flex-wrap:wrap;margin-top:10px">
      <label class="col" style="flex:1"><input id="isTPMR" type="checkbox"> TPMR (+30 €)</label>
      <label class="col" style="flex:1"><input id="isDROM" type="checkbox"> DROM (+3 €)</label>
    </div>

    <div style="text-align:center;margin-top:16px">
      <button id="calcBtn" style="background:#1f2937;color:#fff;padding:12px 20px;border:0;border-radius:8px;cursor:pointer;font-weight:700">Calculer</button>
    </div>

    <div id="result" style="margin-top:20px"></div>
  </div>
</div>
